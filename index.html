<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DQM1ãƒ»2 PSç‰ˆ é…åˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã€å®Œå…¨ç¶²ç¾…ç‰ˆã€‘</title>
    <style>
        :root { --bg: #0f172a; --card: #1e293b; --text: #f8fafc; --accent: #38bdf8; --border: #334155; }
        body { font-family: 'Segoe UI', Meiryo, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; line-height: 1.6; }
        .wrapper { max-width: 1200px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 20px; border-bottom: 2px solid var(--accent); padding-bottom: 10px; }
        .card { background: var(--card); padding: 20px; border-radius: 12px; border: 1px solid var(--border); margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; color: var(--accent); }
        select { width: 100%; padding: 12px; border-radius: 8px; background: #0f172a; color: white; border: 1px solid var(--border); font-size: 16px; margin-bottom: 15px; }
        button { width: 100%; padding: 15px; background: var(--accent); color: #0f172a; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; }
        button:hover { opacity: 0.9; }
        #output { background: #000; color: #10b981; padding: 20px; border-radius: 8px; font-family: 'Consolas', monospace; white-space: pre; overflow-x: auto; border: 1px solid var(--accent); line-height: 1.4; font-size: 13px; }
        .family-info { color: #f472b6; font-size: 0.85em; margin-top: 15px; border-top: 1px solid #334155; padding-top: 10px; }
        .summary-total { color: #fbbf24; font-weight: bold; margin-top: 20px; display: block; }
    </style>
</head>
<body>

<div class="wrapper">
    <header><h1>ğŸ‘¾ DQM1ãƒ»2 PSç‰ˆ é…åˆæ¤œç´¢ï¼ˆå®Œå…¨çµ±åˆãƒ»å…¨312ç¨®ãƒ‡ãƒ¼ã‚¿ï¼‰</h1></header>

    <div class="card">
        <label>ç›®æ¨™ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠ</label>
        <select id="targetSelect"></select>
        <label>æ‰‹æŒã¡ã‹ã‚‰é–‹å§‹ï¼ˆä»»æ„ï¼‰</label>
        <select id="startSelect"><option value="">-- æœ€åˆã‹ã‚‰ --</option></select>
        <button onclick="generateTree()">å®Œå…¨ãƒ«ãƒ¼ãƒˆæ¤œç´¢</button>
    </div>

    <div id="resultCard" class="card" style="display:none;">
        <div id="output"></div>
    </div>
</div>

<script>
// --- PSç‰ˆ å…¨312ç¨® ç³»çµ±åˆ¥å…¨æ•°ãƒªã‚¹ãƒˆ ---
const familyFullLists = {
    "ã‚¹ãƒ©ã‚¤ãƒ ç³»": ["ã‚¹ãƒ©ã‚¤ãƒ ","ã‚¹ãƒ©ã‚¤ãƒ ãƒ™ã‚¹","ãƒ›ã‚¤ãƒŸã‚¹ãƒ©ã‚¤ãƒ ","ãƒãƒ–ãƒ«ã‚¹ãƒ©ã‚¤ãƒ ","ã‚¹ãƒ©ãƒƒãƒ”ãƒ¼","ã‚¹ãƒ©ã‚¤ãƒ ãƒ•ã‚¡ãƒ³ã‚°","ã‚¹ãƒ©ã‚¤ãƒ ãƒŠã‚¤ãƒˆ","ã‚¹ãƒˆãƒ¼ãƒ³ã‚¹ãƒ©ã‚¤ãƒ ","ãƒ‰ãƒ©ã‚´ã‚¹ãƒ©ã‚¤ãƒ ","ã‚¹ãƒ©ã‚¤ãƒ ã¤ã‚€ã‚Š","ã‚¹ãƒ©ã‚¤ãƒ ãƒœãƒ¼ã‚°","ã‚¹ãƒ©ã‚¤ãƒ ãƒ„ãƒªãƒ¼","ãƒœãƒƒã‚¯ã‚¹ã‚¹ãƒ©ã‚¤ãƒ ","ã¯ã­ã‚¹ãƒ©ã‚¤ãƒ ","ã¶ã¡ã‚¹ãƒ©ã‚¤ãƒ ","ã¶ã¡ã‚­ãƒ³ã‚°","ã‚­ãƒ³ã‚°ã‚¹ãƒ©ã‚¤ãƒ ","ãƒ¡ã‚¿ãƒ«ã‚¹ãƒ©ã‚¤ãƒ ","ã¯ãã‚Œãƒ¡ã‚¿ãƒ«","ãƒ¡ã‚¿ãƒ«ã‚­ãƒ³ã‚°","ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¹ãƒ©ã‚¤ãƒ ","ã‚¨ãƒ³ã‚¼ãƒ«ã‚¹ãƒ©ã‚¤ãƒ ","ãƒˆãƒ­ãƒ”ã‚«ãƒ«ã‚¹ãƒ©ã‚¤ãƒ ","ãƒ‘ãƒ¼ãƒ«ã‚¹ãƒ©ã‚¤ãƒ ","ãƒ”ã‚¨ãƒ­ã‚¹ãƒ©ã‚¤ãƒ ","ã‚°ãƒ©ãƒ³ã‚¹ãƒ©ã‚¤ãƒ ","ãƒ¯ãƒ³ãƒ€ãƒ¼ã‚¨ãƒƒã‚°","ãƒãƒªãƒ³ã‚¹ãƒ©ã‚¤ãƒ "],
    "ãƒ‰ãƒ©ã‚´ãƒ³ç³»": ["ãƒ‰ãƒ©ã‚´ãƒ³ã‚­ãƒƒã‚º","ã‚³ãƒ‰ãƒ©","ã¨ã•ã‹ã¸ã³","ãƒªã‚¶ãƒ¼ãƒ‰ãƒ•ãƒ©ã‚¤","ãƒã‚¤ã‚ºãƒ³ãƒªã‚¶ãƒ¼ãƒ‰","ãƒ•ãƒ¼ã‚»ãƒ³ãƒ‰ãƒ©ã‚´ãƒ³","ãƒ•ã‚§ã‚¢ãƒªãƒ¼ãƒ‰ãƒ©ã‚´ãƒ³","ã‚¦ã‚£ãƒ³ã‚°ã‚¹ãƒãƒ¼ã‚¯","ã‚¬ãƒ¡ã‚´ãƒ³","ãƒ—ãƒ†ãƒ©ãƒãƒ‰ãƒ³","ãƒªã‚¶ãƒ¼ãƒ‰ãƒãƒ³","ã‚½ãƒ¼ãƒ‰ãƒ‰ãƒ©ã‚´ãƒ³","ãƒ‰ãƒ©ã‚´ãƒ³ãƒãƒƒãƒ‰","ã‚¢ãƒ³ãƒ‰ãƒ¬ã‚¢ãƒ«","ã‚­ãƒ³ã‚°ã‚³ãƒ–ãƒ©","ãƒ©ã‚¤ãƒãƒ¼ãƒ³","ã¸ã³ã“ã†ã‚‚ã‚Š","ãŠãŠã‚¤ã‚°ã‚¢ãƒŠ","ãƒ‡ãƒ³ã‚¿ã‚¶ã‚¦ãƒ«ã‚¹","ãƒãƒˆãƒ«ãƒ¬ãƒƒã‚¯ã‚¹","ã‚°ãƒ¬ã‚¤ãƒˆãƒ‰ãƒ©ã‚´ãƒ³","ã‚¹ã‚«ã‚¤ãƒ‰ãƒ©ã‚´ãƒ³","ã‚„ã¾ãŸã®ãŠã‚ã¡","ã—ã‚“ã‚Šã‚…ã†","ã‚®ã‚¬ãƒ³ãƒˆãƒ‰ãƒ©ã‚´ãƒ³","ãƒ‰ãƒ©ã‚¤ã‚´ãƒ³","ã‚ªãƒªãƒãƒ«ã‚´ãƒ³","ã‚³ã‚¢ãƒˆãƒ«","ãƒãƒ”ãƒ©ã‚¹","ã˜ã‚ƒã‚Šã‚…ã†ã›ã‚“ã—","ãƒ†ãƒ©ãƒã‚¶ãƒ¼ã‚¹","ã‚³ãƒ¢ãƒ‰ãƒ‰ãƒ©ã‚´ãƒ³"],
    "ã‘ã‚‚ã®ç³»": ["ã‚¢ãƒ³ãƒˆãƒ™ã‚¢","ã‚¢ãƒ«ãƒŸãƒ©ãƒ¼ã‚¸","ãƒŸãƒãƒ¼ãƒ³","ãµã«ã‚ƒã‚€ã«ã‚ƒ","ãƒ™ãƒ­ã‚´ãƒ³","ãƒ•ã‚¡ãƒ¼ãƒ©ãƒƒãƒˆ","ã‚­ãƒ©ãƒ¼ã‚¹ã‚³ãƒƒãƒ—","ã‚­ãƒ£ãƒƒãƒˆãƒ•ãƒ©ã‚¤","ã‚¹ã‚«ãƒ«ã‚¬ãƒ«ãƒ¼","ãŠãŠãã¥ã¡","ã‚‚ã‚‚ã‚“ã˜ã‚ƒ","ãƒ•ã‚§ã‚¢ãƒªãƒ¼ãƒ©ãƒƒãƒˆ","ã‚­ãƒ©ãƒ¼ã‚¨ã‚¤ãƒ—","ã‚´ãƒ¼ãƒˆãƒ‰ãƒ³","ã‚¤ã‚¨ãƒ†ã‚£","ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ†ãƒ³ãƒ„ã‚¯","ã‚¢ã‚¤ã‚¢ãƒ³ã‚¿ãƒ¼ãƒˆãƒ«","ã‚¹ãƒˆãƒ­ãƒ³ã‚°ã‚¢ãƒ‹ãƒãƒ«","ã‚°ãƒªã‚ºãƒªãƒ¼","ãƒ“ãƒƒã‚¯ã‚¢ã‚¤","ãƒ‘ã‚ªãƒ¼ãƒ ","ã‚­ãƒ©ãƒ¼ãƒ‘ãƒ³ã‚µãƒ¼","ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ³","ã‚­ãƒ³ã‚°ãƒ¬ã‚ª","ãƒ€ãƒ¼ã‚¯ãƒ›ãƒ¼ãƒ³","ãƒ˜ãƒ«ã‚´ãƒ©ã‚´","ã‚ˆã‚‹ã®ã¦ã„ãŠã†","ã‘ã‚‚ã®ã®ãã—","ãƒ“ãƒ¼ãƒãƒ¼ãƒ³","ã‚ªãƒ¼ã‚¯","ãƒˆãƒ‰ãƒãƒ³","ãƒ€ãƒ³ãƒ“ãƒ©ãƒ ãƒ¼ãƒãƒ§","ã­ã“ã¾ã©ã†","ã‹ãã¨ã†ãƒ‘ãƒ³ã‚µãƒ¼"],
    "ã¨ã‚Šç³»": ["ãƒ‰ãƒ©ã‚­ãƒ¼","ãƒ”ãƒƒã‚­ãƒ¼","ãƒãƒŠã‚«ãƒ¯ã‚»ãƒŸ","ãŠãŠã«ã‚ã¨ã‚Š","ã‚ã°ã‚Œã†ã—ã©ã‚Š","ãƒ€ãƒƒã‚¯ã‚«ã‚¤ãƒˆ","ãƒ‡ãƒƒãƒ‰ãƒšãƒƒã‚«ãƒ¼","ãƒ‡ã‚¹ãƒ•ãƒ©ãƒƒã‚¿ãƒ¼","ãƒŸã‚¹ãƒˆã‚¦ã‚¤ãƒ³ã‚°","ã‚­ãƒ¡ãƒ©","ãƒ¢ãƒ¼ã‚¶","ã‚¬ãƒ³ã‚³ã©ã‚Š","ãƒ•ã‚¡ãƒ³ã‚­ãƒ¼ãƒãƒ¼ãƒ‰","ã‚­ãƒ©ãƒ¼ã‚°ãƒ¼ã‚¹","ãƒ˜ãƒ«ã‚³ãƒ³ãƒ‰ãƒ«","ãƒ­ãƒƒã‚¯ã¡ã‚‡ã†","ã‚µãƒ³ãƒ€ãƒ¼ãƒãƒ¼ãƒ‰","ã²ãã„ã©ã‚Š","ãƒ›ãƒ¼ã‚¯ãƒ–ãƒªã‚¶ãƒ¼ãƒ‰","ã«ã˜ãã˜ã‚ƒã","ã‚¢ã‚¯ã‚¢ãƒãƒªãƒ³ãƒ›ãƒ¼ã‚¯","ã„ã‚ã¨ã³ã‚ãã¾","ã‚¦ã‚¤ãƒ³ã‚°ã‚¢ã‚µã‚·ãƒ³","ã‚¨ãƒŸãƒ¥ãƒ¼","ã‚ˆãªãã«ã©ã‚Š","ã‚·ãƒ£ãƒ³ã‚¿ã‚¯","ã‚­ãƒ³ã‚°ã‚¢ã‚ºãƒ©ã‚¤ãƒ«","ã‚„ãŸãŒã‚‰ã™"],
    "æ¤ç‰©ç³»": ["ãƒãƒƒãƒ‰ãƒ—ãƒ©ãƒ³ãƒˆ","ãµã‚†ã†ã˜ã‚…","ã‚¬ãƒƒãƒ—ãƒªãƒ³","ãƒã‚¿ãƒ³ã‚´","ãã‚Šã‹ã¶ãŠã°ã‘","ã‚ªãƒ‹ã‚ªãƒ¼ãƒ³","ã‚µãƒœãƒ†ãƒ³ãƒœãƒ¼ãƒ«","ã‚³ãƒã‚¯ãã†","ã¯ãªã¾ã©ã†","ã‹ã‚Šã‚…ã†ãã†","ãƒ€ãƒ³ã‚¹ã‚­ãƒ£ãƒ­ãƒƒãƒˆ","ãƒ˜ãƒ«ãƒœãƒƒã‚¯ãƒ«","ãƒ“ãƒ¼ãƒ³ãƒ•ã‚¡ã‚¤ã‚¿ãƒ¼","ã‚¨ãƒ“ãƒ«ã‚·ãƒ¼ãƒ‰","ã˜ã‚“ã‚ã‚“ã˜ã‚…","ãƒãƒ³ã‚¤ãƒ¼ã‚¿ãƒ¼","ã²ã¨ãã„ãã†","ãƒãƒ³ãƒ‰ãƒ©ã‚´ãƒ©","ãƒ­ãƒ¼ã‚ºãƒãƒˆãƒ©ãƒ¼","ã‚¨ã‚°ãƒ‰ãƒ©ã‚·ãƒ«","ãƒ‡ãƒ“ãƒ«ãƒ‘ã‚¤ãƒ³","ãƒŠã‚¹ãƒ“ãƒŠãƒ¼ãƒ©","ã‚¨ãƒ“ãƒ«ãƒã‚¹ãƒˆ","ãƒ—ãƒãƒ’ãƒ¼ãƒ­ãƒ¼"],
    "è™«ç³»": ["ãŠãŠãªã‚ãã˜","ã‚­ãƒ£ã‚¿ãƒ”ãƒ©ãƒ¼","ãã‚“ãŸã„ã‚¢ãƒª","ã˜ã‚“ã‚ã‚“ã¡ã‚‡ã†","ã›ã¿ã‚‚ãã‚‰","ã‚­ãƒªã‚­ãƒªãƒãƒƒã‚¿","ãƒ†ãƒ¼ãƒ«ã‚¤ãƒ¼ã‚¿ãƒ¼","ã‚ˆã‚ã„ãƒ ã‚«ãƒ‡","ãƒ¡ãƒ¼ãƒ€","ãƒ‡ã‚¹ãƒ•ã‚¡ãƒ¬ãƒ¼ãƒŠ","ãƒ‰ãƒ­ãƒ«","ãã‚“ãŸã„ã‚¬ãƒ‹","ãƒ˜ãƒ«ãƒ›ãƒ¼ãƒãƒƒãƒˆ","ã¯ã•ã¿ãã‚ãŒãŸ","ãƒ›ãƒ¼ãƒ³ãƒ“ãƒ¼ãƒˆãƒ«","ã•ãã‚Šã‚¢ãƒ¼ãƒãƒ¼","ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ãˆã³","ã‚­ãƒ©ãƒ¼ã‚·ãƒƒã‚¯ãƒ«","ã‚«ãƒã‚­ãƒªã›ã‚“ã—","ãƒ”ãƒ¥ãƒ¼ãƒ­","ãƒãƒ«ãƒã‚¢ã‚¤","ã‚¹ã‚«ãƒ«ã‚¹ãƒ‘ã‚¤ãƒ€ãƒ¼"],
    "ã‚ãã¾ç³»": ["ãƒ”ã‚¯ã‚·ãƒ¼","ã‚¢ãƒ¼ã‚¯ãƒ‡ãƒ¼ãƒ¢ãƒ³","ãƒ™ãƒ“ãƒ¼ã‚µã‚¿ãƒ³","ã‚°ãƒ¬ãƒ ãƒªãƒ³","ãƒ€ãƒ¼ã‚¯ã‚¢ã‚¤","ãŠãŠã‚ã ã¾","ã‚¹ã‚«ãƒ«ãƒ©ã‚¤ãƒ€ãƒ¼","ãƒ˜ãƒ«ãƒ“ãƒ¼ã‚¹ãƒˆ","ãƒ¡ãƒ‰ãƒ¼ã‚µãƒœãƒ¼ãƒ«","ã‚ãã¾ã®ãã—","ãã‚Šã•ããƒ”ã‚¨ãƒ­","ã‚®ã‚¬ãƒ³ãƒ†ã‚¹","ã‚¢ãƒ³ã‚¯ãƒ«ãƒ›ãƒ¼ãƒ³","ã˜ã”ãã®ã‚‚ã‚“ã°ã‚“","ãšã—ãŠã†ã¾ã‚‹","ãƒœã‚¹ãƒˆãƒ­ãƒ¼ãƒ«","ãƒ©ã‚¤ã‚ªãƒãƒƒã‚¯","ã‚ªãƒ¼ã‚¬ãƒ¼","ã‚¢ã‚¯ãƒãƒ¼","ã‚¸ãƒ£ãƒŸãƒ©ã‚¹","ãƒ‡ãƒ¥ãƒ©ãƒ³","ãƒãƒ–ãƒ«ãƒ‡ãƒ¼ãƒ¢ãƒ³","ã²ã¨ã¤ã‚ãƒ”ã‚¨ãƒ­","ã‚¨ãƒ“ãƒ«ãƒ¯ãƒ³ãƒ‰","ãƒ™ãƒ«ã‚¶ãƒ–ãƒ«","ã‚°ãƒ¬ãƒ³ãƒ‡ãƒ«","ãƒ‡ãƒ¼ãƒ¢ãƒ³ãƒ¬ã‚¹ãƒ©ãƒ¼","ãƒ¬ãƒƒãƒ‰ãƒãƒ­ãƒ³","ã‚ãã¾ã®ã‚«ã‚¬ãƒŸ"],
    "ã‚¾ãƒ³ãƒ“ç³»": ["ã‚´ãƒ¼ã‚¹ãƒˆ","ãƒãƒƒãƒ‰ãƒ­ãƒ³","ãã•ã£ãŸã—ãŸã„","ãŒã„ã“ã¤ã‘ã‚“ã—","ã—ã‚Šã‚‡ã†ã®ãã—","ã‚¹ã‚«ãƒ«ã‚´ãƒ³","ãƒœãƒ¼ãƒ³ãƒ—ãƒªã‚ºãƒŠãƒ¼","ã—ã«ãŒã¿ããã","ãƒãƒŸãƒ¼","ãƒŠã‚¤ãƒˆã‚¦ã‚¤ãƒ—ã‚¹","ã—ã«ãŒã¿","ã‚¨ãƒ“ãƒ«ã‚¹ãƒ”ãƒªãƒƒãƒ„","ãƒ¯ã‚¤ãƒˆã‚­ãƒ³ã‚°","ã¾ãŠã†ã®ã¤ã‹ã„","ãƒ©ã‚¶ãƒãƒŠã‚¹","ã‚†ã†ã‚Œã„ã›ã‚“ã¡ã‚‡ã†","ãƒŠã‚¤ãƒˆãƒªãƒƒãƒ","ã•ã‹ã•ã‚¾ãƒ³ãƒ“","ãƒ•ã‚£ã‚¢ãƒ¼ãƒ‘ãƒšãƒƒãƒˆ","ãƒ€ãƒ¼ã‚¯ã‚¯ãƒ©ãƒ–","ãƒãƒ ãƒãƒ ãƒœãƒ ","ã‚¹ã‚«ãƒ«ã‚µãƒ¼ãƒšãƒ³ãƒˆ"],
    "ç‰©è³ªç³»": ["ã‚ã‚‰ã„ã¶ãã‚","ãŠã©ã‚‹ã»ã†ã›ã","ãƒãƒ‰ãƒãƒ³ãƒ‰","ã©ã‚ã«ã‚“ãã‚‡ã†","ã‚´ãƒ¼ãƒ¬ãƒ ","ã†ã”ãã›ããã†","ã°ãã ã‚“ã„ã‚","ãƒŸã‚¹ãƒ†ãƒªãƒ‰ãƒ¼ãƒ«","ã²ã¨ãã„ã°ã“","ãƒŸãƒŸãƒƒã‚¯","ãƒ¡ã‚¿ãƒ«ãƒ‰ãƒ©ã‚´ãƒ³","ã‚­ãƒ©ãƒ¼ãƒã‚·ãƒ³","ã‚­ãƒ©ãƒ¼ãƒã‚·ãƒ³2","ãƒ—ãƒ­ãƒˆã‚­ãƒ©ãƒ¼","ã²ã‚‡ã†ãŒã¾ã˜ã‚“","ã‚ˆã†ãŒã‚“ã¾ã˜ã‚“","ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚´ãƒ¼ãƒ¬ãƒ ","ãƒ‡ã‚¹ã‚½ãƒ¼ã‚µãƒ¼","ã®ã‚ã„ã®ãƒ©ãƒ³ãƒ—","ã‚®ã‚ºãƒ¢","ã¨ã’ã¼ã†ãš","ãƒã‚¸ã¾ãã©ã‚Š","ã°ãã ã‚“ãƒ™ãƒ“ãƒ¼","ãƒ€ãƒ¼ã‚¯ãƒã‚¿ãƒ¼","ã‚ãã¾ã®ã¤ã¼","ãƒˆãƒ¼ãƒ†ãƒ ã‚­ãƒ©ãƒ¼","ãŠã°ã‘ã‚­ãƒ£ãƒ³ãƒ‰ãƒ«","ã•ã¾ã‚ˆã†ã‚ˆã‚ã„","ãƒ–ãƒ©ã‚·ã“ãã†"],
    "æ°´ç³»": ["ãƒ—ãƒã‚¢ãƒ¼ãƒãƒ³","ãŸã¾ã¦ãŒã„","ã‚¬ãƒãƒ‹ã‚¢ãƒ³","ã¨ã¤ã’ãã†ãŠ","ãƒ˜ãƒ«ãƒ‘ã‚¤ãƒ¬ãƒ¼ãƒ„","ã‚¢ãƒƒã‚¯ã‚¹ã‚·ãƒ£ãƒ¼ã‚¯","ã‚¤ã‚«ãšãã‚“","ãƒ›ã‚¨ãƒ¼ãƒ«ãƒãƒ¼ã‚¸","ã ã„ãŠã†ã‚¤ã‚«","ãƒ€ã‚´ãƒ³","ã‚°ãƒ©ã‚³ã‚¹","ãƒã‚»ã‚¤ãƒ‰ãƒ³","ã‚¢ã‚¯ã‚¢ãƒ‘ãƒ©ã‚½ãƒ«","ã‚¤ãƒ«ã‚«ã¡ã‚‡ã†ã¡ã‚“","ã‚¨ãƒ“ãƒ«ã‚¢ãƒ³ã‚°ãƒ©ãƒ¼","ãŠãŠã†ã¤ã¼","ã‚ªã‚¯ãƒˆãƒªãƒ¼ãƒ","ãŠã°ã‘ãƒ’ãƒˆãƒ‡","ã‚­ãƒ©ãƒ¼ã‚¦ã‚§ãƒ¼ãƒ–","ã‚¯ãƒ©ãƒ–ãƒãƒ³","ã‚·ãƒ¼ãƒ›ãƒ¼ã‚¹","ã—ã‚“ã‹ã„ã‚Šã‚…ã†","ãŸã“ã¤ã¼ã“ãã†","ãƒ‡ã‚£ã‚´ãƒ³ã‚°","ãƒ•ã‚£ãƒƒã‚·ãƒ¥ãƒ©ã‚¤ãƒ€ãƒ¼","ãƒãƒ¼ã‚¿ã‚¤ã‚¬ãƒ¼","ãƒãƒƒãƒ‰ãƒ­ãƒ–ã‚¹ã‚¿ãƒ¼"]
};

// --- å…¨é…åˆãƒã‚¹ã‚¿ãƒ¼DB (3ã‚µã‚¤ãƒˆçµ±åˆ) ---
const dqmMasterDb = {
    // ï¼Ÿï¼Ÿï¼Ÿï¼Ÿç³»
    "ãƒ€ãƒ¼ã‚¯ãƒ‰ãƒ¬ã‚¢ãƒ ": ["ãƒ‡ã‚¹ã‚¿ãƒ ãƒ¼ã‚¢(æœ€çµ‚å½¢æ…‹)", "ã‚ãŸã¼ã†"],
    "ãƒ‡ã‚¹ã‚¿ãƒ ãƒ¼ã‚¢(æœ€çµ‚å½¢æ…‹)": ["ãƒ‡ã‚¹ã‚¿ãƒ ãƒ¼ã‚¢(å¤‰èº«å½¢æ…‹)", "ãƒ ãƒ‰ãƒ¼"],
    "ãƒ‡ã‚¹ã‚¿ãƒ ãƒ¼ã‚¢(å¤‰èº«å½¢æ…‹)": ["ãƒ‡ã‚¹ã‚¿ãƒ ãƒ¼ã‚¢", "ã•ãã‚Šã‚¢ãƒ¼ãƒãƒ¼"],
    "ãƒ‡ã‚¹ã‚¿ãƒ ãƒ¼ã‚¢": ["ãƒŸãƒ«ãƒ‰ãƒ©ãƒ¼ã‚¹", "ã•ãã‚Šã‚¢ãƒ¼ãƒãƒ¼"],
    "ãƒŸãƒ«ãƒ‰ãƒ©ãƒ¼ã‚¹": ["ã‚¨ã‚¹ã‚¿ãƒ¼ã‚¯", "ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¹ãƒ©ã‚¤ãƒ "],
    "ã‚¨ã‚¹ã‚¿ãƒ¼ã‚¯": ["ãƒ‡ã‚¹ãƒ”ã‚µãƒ­", "ã‚­ãƒ³ã‚°ãƒ¬ã‚ª"],
    "ãƒ‡ã‚¹ãƒ”ã‚µãƒ­": ["ãƒ‡ãƒ¥ãƒ©ãƒ³", "ã—ã‚“ã‚Šã‚…ã†"],
    "ã‚¾ãƒ¼ãƒ": ["ã‚Šã‚…ã†ãŠã†", "ã‚·ãƒ‰ãƒ¼"],
    "ã‚·ãƒ‰ãƒ¼": ["ã‚¸ãƒ£ãƒŸãƒ©ã‚¹", "ãƒ­ãƒ¼ã‚ºãƒãƒˆãƒ©ãƒ¼"],
    "ãƒãƒ©ãƒ¢ã‚¹": ["ãƒãƒ¼ã‚´ãƒ³", "ã‚„ã¾ãŸã®ãŠã‚ã¡"],
    "ãƒãƒ¼ã‚´ãƒ³": ["ãƒ¯ã‚¤ãƒˆã‚­ãƒ³ã‚°", "ãƒ¡ã‚¿ãƒ«ã‚­ãƒ³ã‚°"],
    "ã‚Šã‚…ã†ãŠã†": ["ãƒ‰ãƒ©ã‚´ãƒ³ç³»", "ã¾ãŠã†ã®ã¤ã‹ã„"],
    "ãƒ ãƒ‰ãƒ¼": ["ãƒ–ãƒ¼ã‚¹ã‚«", "ã‚ªãƒ«ã‚´ãƒ»ãƒ‡ãƒŸãƒ¼ãƒ©"],
    "ã‚ªãƒ«ã‚´ãƒ»ãƒ‡ãƒŸãƒ¼ãƒ©": ["ã—ã‚“ã‚Šã‚…ã†", "ãƒŠã‚¤ãƒˆãƒªãƒƒãƒ"],

    // ã‚¹ãƒ©ã‚¤ãƒ ç³» ç‰¹æ®Š
    "ã‚°ãƒ©ãƒ³ã‚¹ãƒ©ã‚¤ãƒ ": ["ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¹ãƒ©ã‚¤ãƒ ", "ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¹ãƒ©ã‚¤ãƒ "],
    "ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¹ãƒ©ã‚¤ãƒ ": ["ãƒ¡ã‚¿ãƒ«ã‚­ãƒ³ã‚°", "ãƒ¡ã‚¿ãƒ«ã‚­ãƒ³ã‚°"],
    "ãƒ¡ã‚¿ãƒ«ã‚­ãƒ³ã‚°": ["ã¶ã¡ã‚­ãƒ³ã‚°", "ãƒ¡ã‚¿ãƒ«ãƒ‰ãƒ©ã‚´ãƒ³"],
    "ã¶ã¡ã‚­ãƒ³ã‚°": ["ã‚­ãƒ³ã‚°ã‚¹ãƒ©ã‚¤ãƒ ", "ãƒ¡ã‚¿ãƒ«ã‚­ãƒ³ã‚°"],
    "ã‚­ãƒ³ã‚°ã‚¹ãƒ©ã‚¤ãƒ ": ["ã‚¹ãƒ©ã‚¤ãƒ ç³»", "ï¼Ÿï¼Ÿï¼Ÿï¼Ÿç³»"],
    "ã¯ãã‚Œãƒ¡ã‚¿ãƒ«": ["ãƒ¡ã‚¿ãƒ«ã‚¹ãƒ©ã‚¤ãƒ ", "ãƒ¡ã‚¿ãƒ«ã‚¹ãƒ©ã‚¤ãƒ "],
    "ãƒ¡ã‚¿ãƒ«ã‚¹ãƒ©ã‚¤ãƒ ": ["ã‚¹ãƒ©ã‚¤ãƒ ç³»", "ãƒ¡ã‚¿ãƒ«ãƒ‰ãƒ©ã‚´ãƒ³"],
    "ã‚¨ãƒ³ã‚¼ãƒ«ã‚¹ãƒ©ã‚¤ãƒ ": ["ã‚¹ãƒ©ã‚¤ãƒ ", "ãƒãƒãƒãƒ"],

    // ãƒ‰ãƒ©ã‚´ãƒ³ç³» ç‰¹æ®Š
    "ã—ã‚“ã‚Šã‚…ã†": ["ã‚¹ã‚«ã‚¤ãƒ‰ãƒ©ã‚´ãƒ³", "ã‚„ã¾ãŸã®ãŠã‚ã¡"],
    "ã‚„ã¾ãŸã®ãŠã‚ã¡": ["ã‚¢ãƒ³ãƒ‰ãƒ¬ã‚¢ãƒ«", "ã‚°ãƒ¬ã‚¤ãƒˆãƒ‰ãƒ©ã‚´ãƒ³"],
    "ã‚°ãƒ¬ã‚¤ãƒˆãƒ‰ãƒ©ã‚´ãƒ³": ["ãƒ‰ãƒ©ã‚´ãƒ³ç³»", "ã‚­ãƒ³ã‚°ã‚¹ãƒ©ã‚¤ãƒ "],
    "ã‚¹ã‚«ã‚¤ãƒ‰ãƒ©ã‚´ãƒ³": ["ãƒ‰ãƒ©ã‚´ãƒ³ç³»", "ã²ãã„ã©ã‚Š"],
    "ã‚®ã‚¬ãƒ³ãƒˆãƒ‰ãƒ©ã‚´ãƒ³": ["ã‚°ãƒ¬ã‚¤ãƒˆãƒ‰ãƒ©ã‚´ãƒ³", "ã‚®ã‚¬ãƒ³ãƒ†ã‚¹"],
    "ã‚ªãƒªãƒãƒ«ã‚´ãƒ³": ["ã—ã‚“ã‚Šã‚…ã†", "ã‚®ã‚¬ãƒ³ãƒˆãƒ‰ãƒ©ã‚´ãƒ³"],

    // ã‘ã‚‚ã®ç³» ç‰¹æ®Š
    "ã‚­ãƒ³ã‚°ãƒ¬ã‚ª": ["ãƒ‘ã‚ªãƒ¼ãƒ ", "ãƒ‘ã‚ªãƒ¼ãƒ "],
    "ãƒ‘ã‚ªãƒ¼ãƒ ": ["ã‚­ãƒ©ãƒ¼ã‚¨ã‚¤ãƒ—", "ã‚­ãƒ©ãƒ¼ã‚¨ã‚¤ãƒ—"],
    "ãƒ˜ãƒ«ã‚´ãƒ©ã‚´": ["ãƒ€ãƒ¼ã‚¯ãƒ›ãƒ¼ãƒ³", "ã‚„ã¾ãŸã®ãŠã‚ã¡"],
    "ãƒ€ãƒ¼ã‚¯ãƒ›ãƒ¼ãƒ³": ["ã‘ã‚‚ã®ç³»", "ï¼Ÿï¼Ÿï¼Ÿï¼Ÿç³»"],

    // ã¨ã‚Šç³» ç‰¹æ®Š
    "ã«ã˜ãã˜ã‚ƒã": ["ã²ãã„ã©ã‚Š", "ãƒ›ãƒ¼ã‚¯ãƒ–ãƒªã‚¶ãƒ¼ãƒ‰"],
    "ã²ãã„ã©ã‚Š": ["ã¨ã‚Šç³»", "ãƒ‰ãƒ©ã‚´ã‚¹ãƒ©ã‚¤ãƒ "],
    "ãƒ›ãƒ¼ã‚¯ãƒ–ãƒªã‚¶ãƒ¼ãƒ‰": ["ã¨ã‚Šç³»", "ãƒ¡ã‚¿ãƒ«ã‚¹ãƒ©ã‚¤ãƒ "],
    "ã‚­ãƒ³ã‚°ã‚¢ã‚ºãƒ©ã‚¤ãƒ«": ["ã‚·ãƒ£ãƒ³ã‚¿ã‚¯", "ã«ã˜ãã˜ã‚ƒã"],

    // ä»–ç³»çµ± ç‰¹æ®Š
    "ãƒ­ãƒ¼ã‚ºãƒãƒˆãƒ©ãƒ¼": ["æ¤ç‰©ç³»", "ï¼Ÿï¼Ÿï¼Ÿï¼Ÿç³»"],
    "ã‚¨ã‚°ãƒ‰ãƒ©ã‚·ãƒ«": ["ãƒ­ãƒ¼ã‚ºãƒãƒˆãƒ©ãƒ¼", "ã‚®ã‚¬ãƒ³ãƒ†ã‚¹"],
    "ã•ãã‚Šã‚¢ãƒ¼ãƒãƒ¼": ["ãƒ›ãƒ¼ãƒ³ãƒ“ãƒ¼ãƒˆãƒ«", "ãƒ›ãƒ¼ãƒ³ãƒ“ãƒ¼ãƒˆãƒ«"],
    "ãƒ›ãƒ¼ãƒ³ãƒ“ãƒ¼ãƒˆãƒ«": ["ã¯ã•ã¿ãã‚ãŒãŸ", "ã¯ã•ã¿ãã‚ãŒãŸ"],
    "ãƒ‡ãƒ¥ãƒ©ãƒ³": ["ãšã—ãŠã†ã¾ã‚‹", "ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚´ãƒ¼ãƒ¬ãƒ "],
    "ã‚¸ãƒ£ãƒŸãƒ©ã‚¹": ["ã‚¢ã‚¯ãƒãƒ¼", "ã«ã˜ãã˜ã‚ƒã"],
    "ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚´ãƒ¼ãƒ¬ãƒ ": ["ã²ã‚‡ã†ãŒã¾ã˜ã‚“", "ã‚ˆã†ãŒã‚“ã¾ã˜ã‚“"],
    "ãƒ¯ã‚¤ãƒˆã‚­ãƒ³ã‚°": ["ã‚¾ãƒ³ãƒ“ç³»", "ï¼Ÿï¼Ÿï¼Ÿï¼Ÿç³»"],
    "ã¾ãŠã†ã®ã¤ã‹ã„": ["ãŒã„ã“ã¤ã‘ã‚“ã—", "ãŒã„ã“ã¤ã‘ã‚“ã—"],
    "ã‚°ãƒ©ã‚³ã‚¹": ["æ°´ç³»", "ï¼Ÿï¼Ÿï¼Ÿï¼Ÿç³»"],
    "ãƒ€ãƒ¼ã‚¯ãƒã‚¿ãƒ¼": ["ç‰©è³ªç³»", "ï¼Ÿï¼Ÿï¼Ÿï¼Ÿç³»"]
};

// --- ç³»çµ±é…åˆãƒ†ãƒ¼ãƒ–ãƒ« (å…¨10ç³»çµ±Ã—10ç³»çµ±) ---
const familyRecipes = {
    "ã‚¹ãƒ©ã‚¤ãƒ ç³»": {"ãƒ‰ãƒ©ã‚´ãƒ³ç³»":"ãƒ‰ãƒ©ã‚´ã‚¹ãƒ©ã‚¤ãƒ ", "ã‘ã‚‚ã®ç³»":"ã¶ã¡ã‚¹ãƒ©ã‚¤ãƒ ", "ã¨ã‚Šç³»":"ã¯ã­ã‚¹ãƒ©ã‚¤ãƒ ", "æ¤ç‰©ç³»":"ã‚¹ãƒ©ã‚¤ãƒ ãƒ„ãƒªãƒ¼", "ã‚€ã—ç³»":"ã‚¹ãƒ©ã‚¤ãƒ ã¤ã‚€ã‚Š", "ã‚ãã¾ç³»":"ã‚¹ãƒ©ã‚¤ãƒ ãƒŠã‚¤ãƒˆ", "ã‚¾ãƒ³ãƒ“ç³»":"ãƒãƒ–ãƒ«ã‚¹ãƒ©ã‚¤ãƒ ", "ç‰©è³ªç³»":"ãƒœãƒƒã‚¯ã‚¹ã‚¹ãƒ©ã‚¤ãƒ ", "æ°´ç³»":"ãƒ‘ãƒ¼ãƒ«ã‚¹ãƒ©ã‚¤ãƒ "},
    "ãƒ‰ãƒ©ã‚´ãƒ³ç³»": {"ã‚¹ãƒ©ã‚¤ãƒ ç³»":"ãƒ‰ãƒ©ã‚´ãƒ³ã‚­ãƒƒã‚º", "ã‘ã‚‚ã®ç³»":"ã‚¬ãƒ¡ã‚´ãƒ³", "ã¨ã‚Šç³»":"ãƒ—ãƒ†ãƒ©ãƒãƒ‰ãƒ³", "æ¤ç‰©ç³»":"ãƒ•ãƒ¼ã‚»ãƒ³ãƒ‰ãƒ©ã‚´ãƒ³", "ã‚€ã—ç³»":"ãƒ•ã‚§ã‚¢ãƒªãƒ¼ãƒ‰ãƒ©ã‚´ãƒ³", "ã‚ãã¾ç³»":"ãƒªã‚¶ãƒ¼ãƒ‰ãƒãƒ³", "ã‚¾ãƒ³ãƒ“ç³»":"ãƒã‚¤ã‚ºãƒ³ãƒªã‚¶ãƒ¼ãƒ‰", "ç‰©è³ªç³»":"ã‚½ãƒ¼ãƒ‰ãƒ‰ãƒ©ã‚´ãƒ³", "æ°´ç³»":"ãƒ‰ãƒ©ã‚¤ã‚´ãƒ³"},
    "ã‘ã‚‚ã®ç³»": {"ã‚¹ãƒ©ã‚¤ãƒ ç³»":"ãƒ™ãƒ­ã‚´ãƒ³", "ãƒ‰ãƒ©ã‚´ãƒ³ç³»":"ã‚¢ãƒ«ãƒŸãƒ©ãƒ¼ã‚¸", "ã¨ã‚Šç³»":"ã‚­ãƒ£ãƒƒãƒˆãƒ•ãƒ©ã‚¤", "æ¤ç‰©ç³»":"ãƒ•ã‚¡ãƒ¼ãƒ©ãƒƒãƒˆ", "ã‚€ã—ç³»":"ãƒŸãƒãƒ¼ãƒ³", "ã‚ãã¾ç³»":"ã‚°ãƒªã‚ºãƒªãƒ¼", "ã‚¾ãƒ³ãƒ“ç³»":"ã‚¹ã‚«ãƒ«ã‚¬ãƒ«ãƒ¼", "ç‰©è³ªç³»":"ã‹ã¾ã„ãŸã¡", "æ°´ç³»":"ãƒ“ãƒ¼ãƒãƒ¼ãƒ³"},
    "ã¨ã‚Šç³»": {"ã‚¹ãƒ©ã‚¤ãƒ ç³»":"ãƒ”ãƒƒã‚­ãƒ¼", "ãƒ‰ãƒ©ã‚´ãƒ³ç³»":"ã‚­ãƒ¡ãƒ©", "ã‘ã‚‚ã®ç³»":"ã‚ã°ã‚Œã†ã—ã©ã‚Š", "æ¤ç‰©ç³»":"ãƒãƒŠã‚«ãƒ¯ã‚»ãƒŸ", "ã‚€ã—ç³»":"ãƒ€ãƒƒã‚¯ã‚«ã‚¤ãƒˆ", "ã‚ãã¾ç³»":"ãƒ‡ãƒƒãƒ‰ãƒšãƒƒã‚«ãƒ¼", "ã‚¾ãƒ³ãƒ“ç³»":"ãƒ‡ã‚¹ãƒ•ãƒ©ãƒƒã‚¿ãƒ¼", "ç‰©è³ªç³»":"ãƒŸã‚¹ãƒˆã‚¦ã‚¤ãƒ³ã‚°", "æ°´ç³»":"ã‚¢ã‚¯ã‚¢ãƒãƒªãƒ³ãƒ›ãƒ¼ã‚¯"},
    "æ¤ç‰©ç³»": {"ã‚¹ãƒ©ã‚¤ãƒ ç³»":"ãƒãƒƒãƒ‰ãƒ—ãƒ©ãƒ³ãƒˆ", "ãƒ‰ãƒ©ã‚´ãƒ³ç³»":"ã‹ã‚Šã‚…ã†ãã†", "ã‘ã‚‚ã®ç³»":"ãƒãƒŠãƒãƒ‰ã‚¦", "ã¨ã‚Šç³»":"ãµã‚†ã†ã˜ã‚…", "ã‚€ã—ç³»":"ã‚µãƒœãƒ†ãƒ³ãƒœãƒ¼ãƒ«", "ã‚ãã¾ç³»":"ã‚¬ãƒƒãƒ—ãƒªãƒ³", "ã‚¾ãƒ³ãƒ“ç³»":"ãƒã‚¿ãƒ³ã‚´", "ç‰©è³ªç³»":"ã‚³ãƒã‚¯ãã†", "æ°´ç³»":"ã‚¨ãƒ“ãƒ«ã‚½ãƒ”ã‚¿ãƒ«"},
    "è™«ç³»": {"ã‚¹ãƒ©ã‚¤ãƒ ç³»":"ãŠãŠãªã‚ãã˜", "ãƒ‰ãƒ©ã‚´ãƒ³ç³»":"ã‚­ãƒ£ã‚¿ãƒ”ãƒ©ãƒ¼", "ã‘ã‚‚ã®ç³»":"ã›ã¿ã‚‚ãã‚‰", "ã¨ã‚Šç³»":"ã˜ã‚“ã‚ã‚“ã¡ã‚‡ã†", "æ¤ç‰©ç³»":"ã¨ã†ã¡ã‚…ã†ã‹ãã†", "ã‚ãã¾ç³»":"ãŠãŠã¿ã¿ãš", "ã‚¾ãƒ³ãƒ“ç³»":"ãƒªãƒƒãƒ—ã‚¹", "ç‰©è³ªç³»":"ã¯ã•ã¿ãã‚ãŒãŸ", "æ°´ç³»":"ã‚¬ãƒãƒ‹ã‚¢ãƒ³"},
    "ã‚ãã¾ç³»": {"ã‚¹ãƒ©ã‚¤ãƒ ç³»":"ãƒ”ã‚¯ã‚·ãƒ¼", "ãƒ‰ãƒ©ã‚´ãƒ³ç³»":"ãƒ¡ãƒ‰ãƒ¼ã‚µãƒœãƒ¼ãƒ«", "ã‘ã‚‚ã®ç³»":"ã‚°ãƒ¬ãƒ ãƒªãƒ³", "ã¨ã‚Šç³»":"ãƒ™ãƒ“ãƒ¼ã‚µã‚¿ãƒ³", "æ¤ç‰©ç³»":"ãƒ€ãƒ¼ã‚¯ã‚¢ã‚¤", "ã‚€ã—ç³»":"ãŠãŠã‚ã ã¾", "ã‚¾ãƒ³ãƒ“ç³»":"ã‚¹ã‚«ãƒ«ãƒ©ã‚¤ãƒ€ãƒ¼", "ç‰©è³ªç³»":"ãƒ˜ãƒ«ãƒ“ãƒ¼ã‚¹ãƒˆ", "æ°´ç³»":"ã‚¯ãƒ©ãƒ–ãƒãƒ³"},
    "ã‚¾ãƒ³ãƒ“ç³»": {"ã‚¹ãƒ©ã‚¤ãƒ ç³»":"ã‚´ãƒ¼ã‚¹ãƒˆ", "ãƒ‰ãƒ©ã‚´ãƒ³ç³»":"ã‚¹ã‚«ãƒ«ã‚µãƒ¼ãƒšãƒ³ãƒˆ", "ã‘ã‚‚ã®ç³»":"ãã•ã£ãŸã—ãŸã„", "ã¨ã‚Šç³»":"ã‚„ãŸãŒã‚‰ã™", "æ¤ç‰©ç³»":"ãƒãƒŸãƒ¼", "ã‚€ã—ç³»":"ãƒ€ãƒ¼ã‚¯ã‚¯ãƒ©ãƒ–", "ã‚ãã¾ç³»":"ã—ã‚Šã‚‡ã†ã®ãã—", "ç‰©è³ªç³»":"ã‚·ãƒ£ãƒ‰ãƒ¼", "æ°´ç³»":"ã‚†ã†ã‚Œã„ã›ã‚“ã¡ã‚‡ã†"},
    "ç‰©è³ªç³»": {"ã‚¹ãƒ©ã‚¤ãƒ ç³»":"ãŠã©ã‚‹ã»ã†ã›ã", "ãƒ‰ãƒ©ã‚´ãƒ³ç³»":"ã‚¨ãƒ“ãƒ«ãƒ¯ãƒ³ãƒ‰", "ã‘ã‚‚ã®ç³»":"ãŠã°ã‘ã‚­ãƒ£ãƒ³ãƒ‰ãƒ«", "ã¨ã‚Šç³»":"ãƒã‚¸ã¾ãã©ã‚Š", "æ¤ç‰©ç³»":"ãƒˆãƒ¼ãƒ†ãƒ ã‚­ãƒ©ãƒ¼", "ã‚€ã—ç³»":"ã¨ã’ã¼ã†ãš", "ã‚ãã¾ç³»":"ã‚ãã¾ã®ã‚«ã‚¬ãƒŸ", "ã‚¾ãƒ³ãƒ“ç³»":"ã•ã¾ã‚ˆã†ã‚ˆã‚ã„", "æ°´ç³»":"ãƒ–ãƒ©ã‚·ã“ãã†"},
    "æ°´ç³»": {"ã‚¹ãƒ©ã‚¤ãƒ ç³»":"ãƒãƒªãƒ³ã‚¹ãƒ©ã‚¤ãƒ ", "ãƒ‰ãƒ©ã‚´ãƒ³ç³»":"ãŠãŠã†ã¤ã¼", "ã‘ã‚‚ã®ç³»":"ãƒˆãƒ‰ãƒãƒ³", "ã¨ã‚Šç³»":"ã‚¤ãƒ«ã‚«ã¡ã‚‡ã†ã¡ã‚“", "æ¤ç‰©ç³»":"ãƒŠã‚¹ãƒ“ãƒŠãƒ¼ãƒ©", "ã‚€ã—ç³»":"ã‚¢ã‚¯ã‚¢ãƒ‘ãƒ©ã‚½ãƒ«", "ã‚ãã¾ç³»":"ãŸã“ã¤ã¼ã“ãã†", "ã‚¾ãƒ³ãƒ“ç³»":"ãƒãƒƒãƒ‰ãƒ­ãƒ–ã‚¹ã‚¿ãƒ¼", "ç‰©è³ªç³»":"ã‚¨ãƒ“ãƒ«ã‚¢ãƒ³ã‚°ãƒ©ãƒ¼"}
};

// ãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã§ç³»çµ±é…åˆã®å…¨é€†å¼•ãã‚’ç”Ÿæˆ
for (let f1 in familyRecipes) {
    for (let f2 in familyRecipes[f1]) {
        let res = familyRecipes[f1][f2];
        if (!dqmMasterDb[res]) dqmMasterDb[res] = [f1, f2];
    }
}

// åˆæœŸåŒ–
const targetSel = document.getElementById('targetSelect');
const startSel = document.getElementById('startSelect');
const allNames = Array.from(new Set([...Object.keys(dqmMasterDb), ...Object.keys(familyFullLists)])).sort();

allNames.forEach(n => {
    targetSel.add(new Option(n, n));
    startSel.add(new Option(n, n));
});

function generateTree() {
    const target = targetSel.value;
    const start = startSel.value;
    const output = document.getElementById('output');
    document.getElementById('resultCard').style.display = 'block';
    
    let summary = {};
    let usedFamilies = new Set();

    function build(name, depth = 0) {
        if (name === start && start !== "") {
            return `<span style="color:#fb7185">â˜…æ‰‹æŒã¡[${name}]ã‹ã‚‰é–‹å§‹</span>\n`;
        }
        if (!dqmMasterDb[name]) {
            summary[name] = (summary[name] || 0) + 1;
            if (familyFullLists[name]) usedFamilies.add(name);
            return `<span style="color:#94a3b8">${name}</span>\n`;
        }

        const [p1, p2] = dqmMasterDb[name];
        const indent = "  ".repeat(depth);
        let res = `<span style="color:#38bdf8">${name}</span>\n`;
        res += `${indent}â”£ ${build(p1, depth + 1)}`;
        res += `${indent}â”— ${build(p2, depth + 1)}`;
        return res;
    }

    let treeHTML = build(target);
    
    let familyHTML = "";
    if (usedFamilies.size > 0) {
        familyHTML += "\n<span style='color:#f472b6; font-weight:bold;'>ã€ç´ æã¨ãªã‚‹ç³»çµ±ã®å…¨ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆã€‘</span>\n";
        usedFamilies.forEach(f => {
            familyHTML += `<span style="color:#f472b6">${f}</span>: ${familyFullLists[f].join(", ")}\n`;
        });
    }

    let sumHTML = "<span class='summary-total'>ã€æœ€çµ‚çš„ãªå¿…è¦ç´ ææ•°ã€‘</span>\n";
    for (const [m, c] of Object.entries(summary)) {
        sumHTML += `${m} Ã— ${c}\n`;
    }
    
    output.innerHTML = treeHTML + familyHTML + sumHTML;
}
</script>
</body>
</html>
